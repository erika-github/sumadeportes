<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <title>SumaDeportes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" type="text/css" href="css/gestion.css">
  <style>
    .user-icon {
      width: 4vw;
      height: 4vw;
      /*height: 40px;*/
      background-color: #F36621;
      /* Color de fondo*/
      color: white;
      /* Color del texto */
      /*font-weight: bold;*/
      font-size: 1.5vw;
      border-radius: 50%;
      /* Hace el ícono circular */
      display: flex;
      align-items: center;
      justify-content: center;
      text-transform: uppercase;
      cursor: pointer;
    }

    .user-container {

      display: flex;
      justify-content: space-between;
      height: auto;
      margin-left: 2%;
      cursor: pointer;

    }

    #img,
    #user-icon {

      position: absolute;
      top: 0px;
      /*width: 15%;*/
      z-index: 100;
      margin-top: 0.7%;
      box-sizing: border-box;
      right: 5%;
    }



    /* Estilo del menú emergente */
    .user-menu {
      display: none;
      position: absolute;
      right: 1%;
      min-width: 13%;
      max-width: 13%;
      top: 5.4vw;
      background-color: white;
      border-radius: 0.5vw;
      box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
      padding-bottom: 1%;
      z-index: 10000;

    }

    /* Encabezado del menú */
    .user-menu-header {
      background-color: #F2F2F2;
      padding: 1.5vw;
      color: #7F7F7F;
      text-align: center;
      font-weight: lighter;
    }

    /* Contenido del menú */
    .user-menu-content {
      padding: 1vw;
      display: flex;
      flex-direction: column;
    }

    .user-menu-content a {
      text-decoration: none;
      color: #7F7F7F;
      padding: 0.7vw;
      text-align: center;
      border-radius: 0.3vw;
      margin-top: 2%;
      transition: background 0.3s ease;
    }


    .user-menu-content a:hover {
      background: #F2F2F2;
    }
  </style>

</head>


<body>

  <div class="header-container">
    <!-- Cintillo -->
    <div style="height: 7vw;  
    position: relative;">
      <img id="cintillo" src="img/cintilloMenu.png" alt="Cintillo">
    </div>
    <!-- Logo -->
    <div class="logoDiv">
      <img id="logo" src="img/logo.png" alt="Logo" onclick="window.location.href='index_autenticado.html'">

    </div>

    <!-- Imagen de usuario -->
    <div class="user-container" onclick="toggleUserMenu()">
      <!--<img id="img" src="img/usuario_autent.png" alt="Usuario Autenticado" style="width:5%">-->
      <div id="user-icon" class="user-icon"></div>
    </div>
  </div>

  <!-- Menú emergente -->
  <div class="user-menu" id="user-menu">
    <div class="user-menu-header">
      <p style="font-size:1vw" id="userName">Nombre del Usuario</p>
      <p style="font-size:1vw" id="userRole">Rol del Usuario</p>
    </div>
    <div class="user-menu-content">
      <a href="#" style="font-size:1vw">Editar Perfil</a>
      <a href="#" style="font-size:1vw" onclick="logout()">Cerrar Sesión</a>
    </div>
  </div>


  <div class="slideshow">

    <ul class="slider">


      <li>

        <div id="img_1"></div>
      </li>
      <li>
        <div id="img_2" alt=""></div>
      </li>
      <li>
        <div id="img_3" alt=""></div>
      </li>
      <li>
        <div id="img_4" alt=""></div>
      </li>
      <li>
        <div id="img_5" alt=""></div>
      </li>
    </ul>

  </div>
  <div class="divs-gestion" style="display:flex; justify-content:space-evenly; margin-top:4%; margin-bottom:8%">

    <div class="boton-gestion" style="height:13vw; width:23%; background-color:white; border-radius:1vw; box-shadow: 0vw 0vw 0.70vw rgba(0, 0, 0, 0.5); display: flex; align-items: center; 
        justify-content: center;transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer;"onclick="window.location.href='registro_academia.html'">
      <img src="img/sumate.png" style="width: 95%; height: 95%; object-fit: contain;">
    </div>
    <div class="boton-gestion" style="height:13vw; width:23%; background-color:white; border-radius:1vw; box-shadow: 0vw 0vw 0.70vw rgba(0, 0, 0, 0.5); display: flex; align-items: center; 
        justify-content: center;transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer;"onclick="window.location.href='inscripcion_eventos_mes.html'">
      <img src="img/eventos.png" style="width: 95%; height: 95%; object-fit: contain;">
    </div>
    <div class="boton-gestion" style="height:13vw; width:23%; background-color:white; border-radius:1vw; box-shadow: 0vw 0vw 0.70vw rgba(0, 0, 0, 0.5); display: flex; align-items: center; 
        justify-content: center; transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer;">
      <img src="img/competidores.png" style="width: 95%; height: 95%; object-fit: contain;">
    </div>

  </div>

  <div class="divs-gestion" style="display:flex; justify-content:center; gap:7.5%;margin-top:4%; margin-bottom:8%;">
   
    <div class="boton-gestion" style="height:13vw; width:23%; background-color:white; border-radius:1vw; box-shadow: 0vw 0vw 0.70vw rgba(0, 0, 0, 0.5); display: flex; align-items: center; 
        justify-content: center; transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer;"onclick="window.location.href='registro_torneos.html'">
      <img src="img/registroTorneos.png" style="width: 95%; height: 95%; object-fit: contain;">
    </div>

    <div class="boton-gestion" style="height:13vw; width:23%; background-color:white; border-radius:1vw; box-shadow: 0vw 0vw 0.70vw rgba(0, 0, 0, 0.5); display: flex; align-items: center; 
        justify-content: center; transition: transform 0.3s ease, box-shadow 0.3s ease; cursor: pointer;"onclick="window.location.href='registro_eventos.html'">
      <img src="img/registroEventos.png" style="width: 95%; height: 95%; object-fit: contain;">
    </div>

  </div>
  <footer>
    <div id=footer_logo>
      <img src="img/logo_.png" alt="">
    </div>
    <div id="academia">
      <h2>Academia</h2>
      <p>¿Cursos y horarios?</p>
      <p>¿Dónde encontrarnos?</p>
    </div>
    <div id="informacion">
      <h2>Información</h2>
      <p>Preguntas frecuentes</p>
    </div>

  </footer>

  <div class="registro">
    <div id="linea">
    </div>
    <div id="creadores">
      <p>Suma Deportes, RIF J-00000000-0 Todos los derechos
        reservados.
        Powered by Lenin Manrique & Erika Díaz
      </p>
    </div>
  </div>
  <script src="js/jquery-3.1.0.min.js"></script>
  <script src="js/jquery-ui-1.13.3/external/jquery/jquery.js"></script>
  <script src="js/jquery-ui-1.13.3/jquery-ui.min.js"></script>
  <script src="js/main.js"></script>
  <script>

    /*window.onload = function () {
      // Desplazarse al 30% de la altura total de la página
      window.scrollTo(0, document.body.scrollHeight * 0.3);
    };*/

    /*window.onload = function () {
      window.scrollTo(0, 400); // 200 píxeles desde la parte superior
  };*/

    // Función para cerrar sesión y redirigir a la página de inicio
    function logout() {
      sessionStorage.clear(); // Borra toda la información almacenada
      window.location.href = "index.html"; // Redirige a la página de inicio
    }

    // Función para obtener las iniciales del usuario
    function getInitials(firstName, lastName) {
      if (!firstName || !lastName) return "U"; // Si no hay nombre, usa "U"
      return firstName.charAt(0).toUpperCase() + lastName.charAt(0).toUpperCase();
    }

    // Función para actualizar la información del usuario en el DOM
    function updateUserInfo() {
      // Recuperar datos desde sessionStorage
      const firstName = sessionStorage.getItem("userFirstName") || "Nombre";
      const lastName = sessionStorage.getItem("userLastName") || "Apellido";
      const userRole = sessionStorage.getItem("userRole") || "Rol Predeterminado";

      // Concatenar nombres y mostrar en los elementos correspondientes
      const fullName = `${firstName} ${lastName}`;

      const nameElem = document.getElementById("userName");
      const roleElem = document.getElementById("userRole");

      if (nameElem) nameElem.innerText = fullName;
      if (roleElem) roleElem.innerText = userRole;
    }

    // Función para establecer el ícono del usuario con iniciales
    function setUserIcon() {
      // Actualizar información del usuario
      updateUserInfo();

      // Obtener nombre y apellido del sessionStorage
      const firstName = sessionStorage.getItem("userFirstName");
      const lastName = sessionStorage.getItem("userLastName");

      // Asignar iniciales al ícono del usuario
      const userIcon = document.getElementById("user-icon");
      if (userIcon) {
        userIcon.textContent = getInitials(firstName, lastName);
      }
    }

    // Mostrar/ocultar el menú emergente y cambiar color del icono
    function toggleUserMenu() {
      const menu = document.getElementById("user-menu");
      const userIcon = document.getElementById("user-icon");

      if (menu) {
        const isVisible = menu.style.display === "block";
        menu.style.display = isVisible ? "none" : "block";
        userIcon.style.backgroundColor = isVisible ? "#F36621" : "#2e3192";
      }
    }

    // Cerrar el menú si se hace clic fuera de él
    document.addEventListener("click", (event) => {
      const menu = document.getElementById("user-menu");
      const userIcon = document.getElementById("user-icon");
      const userContainer = document.querySelector(".user-container");

      if (menu && userIcon && userContainer && !userContainer.contains(event.target)) {
        menu.style.display = "none";
        userIcon.style.backgroundColor = "#F36621";
      }
    });

    // Llamar a la función al cargar la página
    document.addEventListener("DOMContentLoaded", setUserIcon);
  </script>
</body>

</html>